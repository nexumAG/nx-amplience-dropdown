_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[7],{"/EDR":function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n("23aj")}])},"23aj":function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return p}));var i=n("nKUr"),o=n("o0o1"),r=n.n(o);function s(t,e,n,i,o,r,s){try{var c=t[r](s),a=c.value}catch(u){return void n(u)}c.done?e(a):Promise.resolve(a).then(i,o)}function c(t){return function(){var e=this,n=arguments;return new Promise((function(i,o){var r=t.apply(e,n);function c(t){s(r,i,o,c,a,"next",t)}function a(t){s(r,i,o,c,a,"throw",t)}c(void 0)}))}}var a=n("7MT5"),u=n("q1tI");function h(){var t=Object(u.useState)(),e=t[0],n=t[1],i=Object(u.useState)(!1),o=i[0],s=i[1],h=Object(u.useState)(!1),f=h[0],p=h[1];function l(){return(l=c(r.a.mark((function t(){var e;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(a.a)();case 3:e=t.sent,n(e),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Not connected to DC");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return Object(u.useEffect)((function(){function t(){return(t=c(r.a.mark((function t(){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,null===e||void 0===e?void 0:e.field.getValue();case 3:n=t.sent,p(n),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:return t.prev=9,s(!0),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[0,7,9,12]])})))).apply(this,arguments)}e&&function(){t.apply(this,arguments)}()}),[e]),Object(u.useEffect)((function(){!function(){l.apply(this,arguments)}()}),[]),{sdk:e,ready:o,initialData:f}}function f(t){var e=t.sdk,n=t.initialData,o=e.params.instance,r=o.defaultValue,s=o.options;return Object(i.jsx)("select",{value:n||r,onChange:function(t){e.field.setValue(t.target.value)},children:s.map((function(t){var e=t.id,n=t.label;return Object(i.jsx)("option",{value:e,children:n},e)}))})}function p(){var t=h(),e=t.sdk,n=t.initialData,o=t.ready;return e&&o?(e.frame.startAutoResizer(),Object(i.jsx)(f,{sdk:e,initialData:n})):Object(i.jsx)("pre",{children:"Loading..."})}},"7MT5":function(t,e,n){"use strict";(function(t){var i,o,r,s,c,a,u,h;n.d(e,"a",(function(){return P})),function(t){t.GET="context-get"}(i||(i={})),function(t){t.GET="content-item-get"}(o||(o={})),function(t){t.IMAGE_GET="media-image-get",t.VIDEO_GET="media-video-get"}(r||(r={})),function(t){t.CONTENT_GET="content-link-get"}(s||(s={})),function(t){t.CONTENT_REF_GET="content-reference-get"}(c||(c={})),function(t){t.MODEL_GET="field-model-get",t.MODEL_SET="field-model-set",t.MODEL_RESET="field-model-reset",t.MODEL_IS_VALID="field-model-is-valid",t.MODEL_VALIDATE="field-model-validate",t.SCHEMA_GET="field-schema-get"}(a||(a={})),function(t){t.READ_ONLY="form-read-only-change",t.GET_FORM_MODEL="form-model-get"}(u||(u={})),function(t){t.HEIGHT_GET="height-get",t.HEIGHT_SET="height-set"}(h||(h={}));var f,p,l,d,m=function(){function t(t){this.connection=t}return t.prototype.getImage=function(){return this.connection.request(r.IMAGE_GET,null,{timeout:!1})},t.prototype.getImages=function(t){var e=(void 0===t?{max:null}:t).max;return this.connection.request(r.IMAGE_GET,{max:e},{timeout:!1})},t.prototype.getVideo=function(){return this.connection.request(r.VIDEO_GET,null,{timeout:!1})},t.prototype.getVideos=function(t){var e=(void 0===t?{max:null}:t).max;return this.connection.request(r.VIDEO_GET,{max:e},{timeout:!1})},t}(),v=function(){return(v=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};function E(t,e,n,i){return new(n||(n=Promise))((function(o,r){function s(t){try{a(i.next(t))}catch(e){r(e)}}function c(t){try{a(i.throw(t))}catch(e){r(e)}}function a(t){t.done?o(t.value):new n((function(e){e(t.value)})).then(s,c)}a((i=i.apply(t,e||[])).next())}))}function g(t,e){var n,i,o,r,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,i&&(o=2&r[0]?i.return:r[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,r[1])).done)return o;switch(i=0,o&&(r=[2&r[0],o.value]),r[0]){case 0:case 1:o=r;break;case 4:return s.label++,{value:r[1],done:!1};case 5:s.label++,i=r[1],r=[0];continue;case 7:r=s.ops.pop(),s.trys.pop();continue;default:if(!(o=(o=s.trys).length>0&&o[o.length-1])&&(6===r[0]||2===r[0])){s=0;continue}if(3===r[0]&&(!o||r[1]>o[0]&&r[1]<o[3])){s.label=r[1];break}if(6===r[0]&&s.label<o[1]){s.label=o[1],o=r;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(r);break}o[2]&&s.ops.pop(),s.trys.pop();continue}r=e.call(t,s)}catch(c){r=[6,c],i=0}finally{n=o=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}}!function(t){t.CONTEXT="Failed to fetch context for UI Extension",t.CONNTECTION_TIMEOUT="Failed to establish connection to DC Application"}(f||(f={})),function(t){t.NO_IDS="Please provide content type ids"}(p||(p={})),function(t){t.SET_HEIGHT_NUMBER="setHeight() only accepts an optional number argument"}(l||(l={})),function(t){t.NO_MODEL="Unable to retrieve form model as form context does not have an active model."}(d||(d={}));var y=function(){function t(t){this.connection=t}return t.prototype.getMultiple=function(t,e){return void 0===e&&(e={max:null}),void 0===e.max&&(e.max=null),this.fetchLinks(t,e.max)},t.prototype.get=function(t){return E(this,void 0,void 0,(function(){return g(this,(function(e){return[2,this.fetchLinks(t)]}))}))},t.prototype.fetchLinks=function(t,e){return E(this,void 0,void 0,(function(){var n;return g(this,(function(i){if(!t||!Array.isArray(t)||!t.length)throw new Error(p.NO_IDS);return n=v({contentTypeIds:t},void 0!==e&&{max:e}||{}),[2,this.connection.request(s.CONTENT_GET,n,{timeout:!1})]}))}))},t}(),w=function(){function t(t){this.connection=t}return t.prototype.getCurrent=function(){return E(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,this.connection.request(o.GET)];case 1:return[2,t.sent()]}}))}))},t}(),T=function(){function t(t,e){var n=this;void 0===e&&(e=window),this.connection=t,this.win=e,this.isAutoResizing=!1,this.observer=new MutationObserver((function(){return n.updateHeight()}));var i=new Promise((function(t){"complete"===e.document.readyState&&t(!0),e.addEventListener("load",(function(){t(!0)}))}));this.connection.on(h.HEIGHT_GET,(function(t,e){return E(n,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return[4,i];case 1:return t.sent(),e(this.getHeight()),[2]}}))}))})),this.updateHeightHandler=this.updateHeight.bind(this)}return t.prototype.getHeight=function(){var t=this.win.document.documentElement;return t?t.getBoundingClientRect().height:0},t.prototype.setHeight=function(t){if(void 0!==t&&"number"!==typeof t)throw new TypeError(l.SET_HEIGHT_NUMBER);var e=void 0===t?this.getHeight():t;this.previousHeight=t,this.connection.emit(h.HEIGHT_SET,e<0?0:e)},t.prototype.startAutoResizer=function(){this.isAutoResizing||(this.isAutoResizing=!0,this.observer.observe(this.win.document.body,{attributes:!0,childList:!0,subtree:!0,characterData:!0}),this.win.addEventListener("resize",this.updateHeightHandler))},t.prototype.stopAutoResizer=function(){this.isAutoResizing&&(this.isAutoResizing=!1,this.observer.disconnect(),this.win.removeEventListener("resize",this.updateHeightHandler))},t.prototype.updateHeight=function(){var t=this.getHeight();t!==this.previousHeight&&this.setHeight(t)},t}(),O=function(){function t(t,e){this.connection=t,this.schema=e}return t.prototype.getValue=function(){return this.connection.request(a.MODEL_GET)},t.prototype.setValue=function(t){return E(this,void 0,void 0,(function(){var e;return g(this,(function(n){switch(n.label){case 0:return[4,this.connection.request(a.MODEL_SET,t)];case 1:return(e=n.sent())&&e.length?[2,Promise.reject(e)]:[2]}}))}))},t.prototype.isValid=function(t){return E(this,void 0,void 0,(function(){return g(this,(function(e){switch(e.label){case 0:return[4,this.connection.request(a.MODEL_IS_VALID,t)];case 1:return[2,e.sent()]}}))}))},t.prototype.validate=function(t){return E(this,void 0,void 0,(function(){var e;return g(this,(function(n){switch(n.label){case 0:return[4,this.connection.request(a.MODEL_VALIDATE,t)];case 1:return[2,(e=n.sent())&&e.length?e:void 0]}}))}))},t.prototype.reset=function(){return this.connection.request(a.MODEL_RESET)},t}(),b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof t?t:"undefined"!==typeof self?self:{};!function(t){var e=function(){try{return!!Symbol.iterator}catch(t){return!1}}(),n=function(t){var n={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return e&&(n[Symbol.iterator]=function(){return n}),n},i=function(t){return encodeURIComponent(t).replace(/%20/g,"+")},o=function(t){return decodeURIComponent(String(t).replace(/\+/g," "))};(function(){try{var e=t.URLSearchParams;return"a=1"===new e("?a=1").toString()&&"function"===typeof e.prototype.set}catch(n){return!1}})()||function(){var o=function(t){Object.defineProperty(this,"_entries",{writable:!0,value:{}});var e=typeof t;if("undefined"===e);else if("string"===e)""!==t&&this._fromString(t);else if(t instanceof o){var n=this;t.forEach((function(t,e){n.append(e,t)}))}else{if(null===t||"object"!==e)throw new TypeError("Unsupported input's type for URLSearchParams");if("[object Array]"===Object.prototype.toString.call(t))for(var i=0;i<t.length;i++){var r=t[i];if("[object Array]"!==Object.prototype.toString.call(r)&&2===r.length)throw new TypeError("Expected [string, any] as entry at index "+i+" of URLSearchParams's input");this.append(r[0],r[1])}else for(var s in t)t.hasOwnProperty(s)&&this.append(s,t[s])}},r=o.prototype;r.append=function(t,e){t in this._entries?this._entries[t].push(String(e)):this._entries[t]=[String(e)]},r.delete=function(t){delete this._entries[t]},r.get=function(t){return t in this._entries?this._entries[t][0]:null},r.getAll=function(t){return t in this._entries?this._entries[t].slice(0):[]},r.has=function(t){return t in this._entries},r.set=function(t,e){this._entries[t]=[String(e)]},r.forEach=function(t,e){var n;for(var i in this._entries)if(this._entries.hasOwnProperty(i)){n=this._entries[i];for(var o=0;o<n.length;o++)t.call(e,n[o],i,this)}},r.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),n(t)},r.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),n(t)},r.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),n(t)},e&&(r[Symbol.iterator]=r.entries),r.toString=function(){var t=[];return this.forEach((function(e,n){t.push(i(n)+"="+i(e))})),t.join("&")},t.URLSearchParams=o}();var r=t.URLSearchParams.prototype;"function"!==typeof r.sort&&(r.sort=function(){var t=this,e=[];this.forEach((function(n,i){e.push([i,n]),t._entries||t.delete(i)})),e.sort((function(t,e){return t[0]<e[0]?-1:t[0]>e[0]?1:0})),t._entries&&(t._entries={});for(var n=0;n<e.length;n++)this.append(e[n][0],e[n][1])}),"function"!==typeof r._fromString&&Object.defineProperty(r,"_fromString",{enumerable:!1,configurable:!1,writable:!1,value:function(t){if(this._entries)this._entries={};else{var e=[];this.forEach((function(t,n){e.push(n)}));for(var n=0;n<e.length;n++)this.delete(e[n])}var i,r=(t=t.replace(/^\?/,"")).split("&");for(n=0;n<r.length;n++)i=r[n].split("="),this.append(o(i[0]),i.length>1?o(i[1]):"")}})}("undefined"!==typeof b?b:"undefined"!==typeof window?window:"undefined"!==typeof self?self:b),function(t){if(function(){try{var e=new t.URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(n){return!1}}()||function(){var e=t.URL,n=function(e,n){"string"!==typeof e&&(e=String(e));var i,o=document;if(n&&(void 0===t.location||n!==t.location.href)){(i=(o=document.implementation.createHTMLDocument("")).createElement("base")).href=n,o.head.appendChild(i);try{if(0!==i.href.indexOf(n))throw new Error(i.href)}catch(f){throw new Error("URL unable to set base "+n+" due to "+f)}}var r=o.createElement("a");if(r.href=e,i&&(o.body.appendChild(r),r.href=r.href),":"===r.protocol||!/:/.test(r.href))throw new TypeError("Invalid URL");Object.defineProperty(this,"_anchorElement",{value:r});var s=new t.URLSearchParams(this.search),c=!0,a=!0,u=this;["append","delete","set"].forEach((function(t){var e=s[t];s[t]=function(){e.apply(s,arguments),c&&(a=!1,u.search=s.toString(),a=!0)}})),Object.defineProperty(this,"searchParams",{value:s,enumerable:!0});var h=void 0;Object.defineProperty(this,"_updateSearchParams",{enumerable:!1,configurable:!1,writable:!1,value:function(){this.search!==h&&(h=this.search,a&&(c=!1,this.searchParams._fromString(this.search),c=!0))}})},i=n.prototype;["hash","host","hostname","port","protocol"].forEach((function(t){!function(t){Object.defineProperty(i,t,{get:function(){return this._anchorElement[t]},set:function(e){this._anchorElement[t]=e},enumerable:!0})}(t)})),Object.defineProperty(i,"search",{get:function(){return this._anchorElement.search},set:function(t){this._anchorElement.search=t,this._updateSearchParams()},enumerable:!0}),Object.defineProperties(i,{toString:{get:function(){var t=this;return function(){return t.href}}},href:{get:function(){return this._anchorElement.href.replace(/\?$/,"")},set:function(t){this._anchorElement.href=t,this._updateSearchParams()},enumerable:!0},pathname:{get:function(){return this._anchorElement.pathname.replace(/(^\/?)/,"/")},set:function(t){this._anchorElement.pathname=t},enumerable:!0},origin:{get:function(){var t={"http:":80,"https:":443,"ftp:":21}[this._anchorElement.protocol],e=this._anchorElement.port!=t&&""!==this._anchorElement.port;return this._anchorElement.protocol+"//"+this._anchorElement.hostname+(e?":"+this._anchorElement.port:"")},enumerable:!0},password:{get:function(){return""},set:function(t){},enumerable:!0},username:{get:function(){return""},set:function(t){},enumerable:!0}}),n.createObjectURL=function(t){return e.createObjectURL.apply(e,arguments)},n.revokeObjectURL=function(t){return e.revokeObjectURL.apply(e,arguments)},t.URL=n}(),void 0!==t.location&&!("origin"in t.location)){var e=function(){return t.location.protocol+"//"+t.location.hostname+(t.location.port?":"+t.location.port:"")};try{Object.defineProperty(t.location,"origin",{get:e,enumerable:!0})}catch(n){setInterval((function(){t.location.origin=e()}),100)}}}("undefined"!==typeof b?b:"undefined"!==typeof window?window:"undefined"!==typeof self?self:b);var _=function(t,e){return(_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function C(t,e){function n(){this.constructor=t}_(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var N,I,S=function(){return(S=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};!function(t){t.SUBSCRIBE="subscribe",t.EMIT="emit",t.REQUEST="request",t.RESOLVE="resolve",t.REJECT="reject"}(N||(N={})),function(t){t.HANDSHAKE="mc-handshake",t.CONNECTED="mc-connected",t.DISCONNECTED="mc-disconnected",t.CONNECTION_TIMEOUT="mc-connection-timeout"}(I||(I={}));var L,R=function(){function t(t){void 0===t&&(t={}),this.connected=!1,this.backlog=[],this.promises={},this.emitters={},this.connectionStep="",this.defaultOptions={window:window,connectionTimeout:2e3,timeout:200,debug:!1,onload:!0,clientInitiates:!1,targetOrigin:"*"},this.options=S({},this.defaultOptions,t)}return t.prototype.emit=function(t,e){return this.message({type:N.EMIT,event:t,payload:e}),this},t.prototype.on=function(t,e){return this.emitters[t]&&Array.isArray(this.emitters[t])?this.emitters[t].push(e):this.emitters[t]=[e],this},t.prototype.request=function(t,e,n){var i=this;return void 0===n&&(n={}),new Promise((function(o,r){var s,c=i.uuidv4(),a=i.getRequestTimeout(n.timeout);!1!==a&&"number"===typeof a&&(s=window.setTimeout((function(){return r("timeout")}),a)),i.promises[c]={resolve:function(t){o(t),s&&clearTimeout(s)},reject:function(t){r(t),s&&clearTimeout(s)}},i.message({type:N.REQUEST,event:t,id:c,payload:e})}))},t.prototype.close=function(){this.connected&&(this.port.close(),this.connected=!1),this.messageListener&&this.options.window.removeEventListener("message",this.messageListener,!1)},t.prototype.setConnectionTimeout=function(){var t=this;clearTimeout(this.connectionTimeout),!1!==this.options.connectionTimeout&&(this.connectionTimeout=window.setTimeout((function(){t.messageListener&&t.options.window.removeEventListener("message",t.messageListener,!1),t.handleMessage({type:N.EMIT,event:I.CONNECTION_TIMEOUT,payload:{message:"Connection timed out while "+t.connectionStep}})}),Number(this.options.connectionTimeout)))},t.prototype.uuidv4=function(){var t=window.crypto||window.msCrypto;return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^t.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},t.prototype.clearConnectionTimeout=function(){clearTimeout(this.connectionTimeout)},t.prototype.initPortEvents=function(){var t=this;this.port.onmessage=function(e){t.handleMessage(e.data)},this.port.onmessageerror=function(e){t.handleError(e)}},t.prototype.finishInit=function(){this.connected=!0,this.clearConnectionTimeout(),this.options.debug&&console.log("Finished connection on "+(this.isClient()?"client":"server")),this.emit(I.CONNECTED),this.completeBacklog()},t.prototype.completeBacklog=function(){var t=this;this.backlog.forEach((function(e){t.portMessage(e)})),this.backlog=[]},t.prototype.handleError=function(t){this.options.debug&&console.error(t)},t.prototype.handleMessage=function(t){var e=this;switch(this.options.debug&&console.log("handle by "+(this.isClient()?"client":"server")+" - ["+t.type+'] "'+t.event+'", payload: ',t.payload),t.type){case N.EMIT:if(!this.emitters[t.event]||!Array.isArray(this.emitters[t.event]))return;this.emitters[t.event].forEach((function(e){return e(t.payload)}));break;case N.REQUEST:if(!this.emitters[t.event]||!Array.isArray(this.emitters[t.event]))return;this.emitters[t.event].forEach((function(n){return n(t.payload,(function(n){e.message({id:t.id,type:N.RESOLVE,event:t.event,payload:n})}),(function(n){e.message({id:t.id,type:N.REJECT,event:t.event,payload:n})}))}));break;case N.RESOLVE:if(!this.promises[t.id])return;this.promises[t.id].resolve(t.payload),delete this.promises[t.id];break;case N.REJECT:if(!this.promises[t.id])return;this.promises[t.id].reject(t.payload),delete this.promises[t.id]}},t.prototype.getRequestTimeout=function(t){return"number"===typeof t&&t>=0?t:"number"===typeof t?0:(!0===t||!1!==t)&&this.options.timeout},t.prototype.isClient=function(){return!1},t.prototype.message=function(t){var e=!1;t.event!==I.HANDSHAKE&&t.event!==I.CONNECTED&&t.event!==I.DISCONNECTED||(e=!0),this.connected||e?this.port&&this.portMessage(t):this.backlog.push(t)},t.prototype.portMessage=function(t){this.options.debug&&console.log("send from "+(this.isClient()?"client":"server")+" - ["+t.type+'] "'+t.event+'", payload: ',t.payload),this.port.postMessage(t)},t}();!function(t){t.CONNECTION="waiting for connection.",t.IFRAME_LOADING="waiting for iframe to load.",t.INITIATION_FROM_CLIENT="waiting for initiation from client."}(L||(L={}));var D;!function(t){function e(e,n){void 0===n&&(n={});var i=t.call(this,n)||this;return i.frame=e,i.connectionStep=L.CONNECTION,i.options.onload&&i.setupLoadInit(),i.options.clientInitiates&&i.setupClientInit(),i.setConnectionTimeout(),i.on(I.DISCONNECTED,(function(){return i.close()})),i}C(e,t),e.prototype.clientInitiation=function(t){t.data===this.id&&(this.connectionStep=L.CONNECTION,this.setConnectionTimeout(),this.options.window.removeEventListener("message",this.messageListener,!1),this.options.debug&&console.log("Server: Client triggered initiation"),this.init())},e.prototype.setupLoadInit=function(){var t=this;this.connectionStep=L.IFRAME_LOADING,this.frame.addEventListener("load",(function(){t.connectionStep=t.options.clientInitiates?L.INITIATION_FROM_CLIENT:L.CONNECTION,t.setConnectionTimeout(),t.init()}))},e.prototype.setupClientInit=function(){var t=this;this.connectionStep=L.INITIATION_FROM_CLIENT,this.id=this.uuidv4();var e=new URL(this.frame.src);e.searchParams.set("mc-name",this.id),this.frame.src=e.toString(),this.messageListener=function(e){return t.clientInitiation(e)},this.options.window.addEventListener("message",this.messageListener)},e.prototype.init=function(){if(!this.frame.contentWindow||!this.frame.src||this.connected)return!1;this.setupChannel(),this.initPortEvents(),this.listenForHandshake(),this.sendPortToClient(this.frame.contentWindow)},e.prototype.sendPortToClient=function(t){t.postMessage(null,this.options.targetOrigin?this.options.targetOrigin:"*",[this.channel.port2])},e.prototype.listenForHandshake=function(){var t=this;this.on(I.HANDSHAKE,(function(e,n){n(e),t.finishInit()}))},e.prototype.setupChannel=function(){this.channel=new MessageChannel,this.port=this.channel.port1}}(R);!function(t){t.CONNECTION="waiting for connection.",t.HANDSHAKE="waiting for handshake."}(D||(D={}));var A=function(t){function e(e){void 0===e&&(e={});var n=t.call(this,e)||this;return n.messageListener=function(t){return n.messageHandler(t)},n.options.window.addEventListener("message",n.messageListener),!1!==n.options.connectionTimeout&&(n.connectionStep=D.CONNECTION,n.setConnectionTimeout()),n}return C(e,t),e.prototype.init=function(){var t=new URL(this.options.window.location.toString());this.id=t.searchParams.get("mc-name"),this.options.debug&&console.log("Client: sent postMessage value:",this.id),this.options.window.parent.postMessage(this.id,this.options.targetOrigin)},e.prototype.messageHandler=function(t){t.ports[0]&&(this.port=t.ports[0],this.initPortEvents(),this.listenForHandshake(),this.options.window.removeEventListener("message",this.messageListener))},e.prototype.listenForHandshake=function(){var t=this;!1!==this.options.connectionTimeout&&(this.connectionStep=D.HANDSHAKE,this.setConnectionTimeout()),this.request(I.HANDSHAKE,null,{timeout:!1}).then((function(){t.addBeforeUnloadEvent(),t.finishInit()})).catch((function(e){t.handleError(e)}))},e.prototype.addBeforeUnloadEvent=function(){var t=this;this.options.window.addEventListener("beforeunload",(function(e){t.emit(I.DISCONNECTED),t.close()}))},e.prototype.isClient=function(){return!0},e}(R),M=function(){function t(t){this.connection=t}return t.prototype.getMultiple=function(t,e){return void 0===e&&(e={max:null}),this.fetchReferences(t,e.max)},t.prototype.get=function(t){return E(this,void 0,void 0,(function(){return g(this,(function(e){return[2,this.fetchReferences(t)]}))}))},t.prototype.fetchReferences=function(t,e){if(!t||!Array.isArray(t)||!t.length)throw new Error(p.NO_IDS);var n=v({contentTypeIds:t},void 0!==e&&{max:e}||{});return this.connection.request(c.CONTENT_REF_GET,n,{timeout:!1})},t}(),H=function(){function t(t,e){var n=this;this.connection=t,this.readOnly=e,this.onChangeStack=[],this.connection.on(u.READ_ONLY,(function(t){n.readOnly=t,n.onChangeStack.forEach((function(t){return t(n.readOnly)}))}))}return t.prototype.onReadOnlyChange=function(t){return this.onChangeStack.push(t),this},t.prototype.getValue=function(){return E(this,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.connection.request(u.GET_FORM_MODEL)];case 1:return[2,t.sent()];case 2:throw t.sent(),new Error(d.NO_MODEL);case 3:return[2]}}))}))},t}(),j=function(){function t(t){void 0===t&&(t={}),this.defaultOptions={window:window,connectionTimeout:!1,timeout:!1,debug:!1},this.options=v(v({},this.defaultOptions),t),this.connection=new A(this.options),this.mediaLink=new m(this.connection),this.contentLink=new y(this.connection),this.contentReference=new M(this.connection),this.frame=new T(this.connection,this.options.window)}return t.prototype.init=function(){return E(this,void 0,void 0,(function(){var t=this;return g(this,(function(e){return[2,new Promise((function(e,n){return E(t,void 0,void 0,(function(){var t=this;return g(this,(function(i){return this.connection.init(),this.connection.on(I.CONNECTED,(function(){return E(t,void 0,void 0,(function(){return g(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.setupContext()];case 1:return t.sent(),e(this),[3,3];case 2:return t.sent(),n(new Error(f.CONTEXT)),[3,3];case 3:return[2]}}))}))})),this.connection.on(I.CONNECTION_TIMEOUT,(function(){n(new Error(f.CONNTECTION_TIMEOUT))})),[2]}))}))}))]}))}))},t.prototype.setupContext=function(){return E(this,void 0,void 0,(function(){var t,e,n,i,o,r,s;return g(this,(function(c){switch(c.label){case 0:return[4,this.requestContext()];case 1:return t=c.sent(),e=t.fieldSchema,n=t.params,i=t.locales,o=t.stagingEnvironment,r=t.readOnly,s=t.visualisation,this.contentItem=new w(this.connection),this.field=new O(this.connection,e),this.form=new H(this.connection,r),this.params=n,this.locales=i,this.visualisation=s,this.stagingEnvironment=o,[2]}}))}))},t.prototype.requestContext=function(){return E(this,void 0,void 0,(function(){return g(this,(function(t){return[2,this.connection.request(i.GET,null,{timeout:!1})]}))}))},t}();function P(t){return E(this,void 0,void 0,(function(){return g(this,(function(e){return[2,new j(t).init()]}))}))}}).call(this,n("yLpj"))},yLpj:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n}},[["/EDR",0,2,1]]]);